<script>
  // Predefined birthdate (YYYY/MM/DD format)
  const predefinedBirthdate = "2003/07/29";

  window.onload = function () {
    calculateAge();
  };

  function calculateAge() {
    const dateParts = predefinedBirthdate.split("/");
    const birthYear = parseInt(dateParts[0]);
    const birthMonth = parseInt(dateParts[1]);
    const birthDay = parseInt(dateParts[2]);

    const today = new Date();
    const todayYear = today.getFullYear();
    const todayMonth = today.getMonth() + 1;
    const todayDay = today.getDate();

    let ageYears = todayYear - birthYear;
    let ageMonths = todayMonth - birthMonth;
    let ageDays = todayDay - birthDay;
    let debutYears = todayYear - 2019;
    let debutMonth = todayMonth - 7;
    let debutDays = todayDay - 29;

    if (ageMonths < 0 || (ageMonths === 0 && ageDays < 0)) {
      const adjustedAge = adjustAge(
        todayYear,
        todayMonth,
        todayDay,
        birthYear,
        birthMonth,
        birthDay
      );
      ageYears = adjustedAge.years;
      ageMonths = adjustedAge.months;
      ageDays = adjustedAge.days;
    }

    let message = `(${ageYears} ขวบ, ${ageMonths} เดือน, และ ${ageDays} วัน)`;
    let age = `${ageYears}`;
    let debutAnnment = ``;
    let debutCount = `(เดบิวต์มาแล้ว ${debutYears} ปี, ${debutMonth} เดือน,  และ ${debutDays} วัน) `;



    if (ageMonths === 0 && ageDays === 0) {
      debutCount +=
        "<p class='bg-emerald-400 rounded-lg p-1 block xl:inline text-ellipsis '>สุขสันต์วันเกิดและครบรอบเดบิวต์ไอช่า!</p>";
      debutAnnment +=
        "<p class='bg-emerald-400 rounded-lg p-1 text-ellipsis text-center '>สุขสันต์วันเกิดและครบรอบเดต์บิวต์ไอช่า!</p>";
    } else if (todayMonth === birthMonth && todayDay === birthDay) {
      debutCount +=
        "<p class='bg-emerald-400 rounded-lg p-1 block xl:inline text-ellipsis '>สุขสันต์วันเกิดและครบรอบเดบิวต์ไอช่า!</p>";
       debutAnnment +=
        "<p class='bg-emerald-400 rounded-lg p-1 text-ellipsis text-center '>สุขสันต์วันเกิดและครบรอบเดบิวต์ไอช่า!</p>";
    } else if (todayMonth === birthMonth) {
      debutCount +=
        "<p class='bg-emerald-400 rounded-lg p-1 block xl:inline text-ellipsis '>สุขสันต์เดือนเกิดและเดือนเดบิวต์ไอช่า!</p>";
          debutAnnment +=
        "<p class='bg-emerald-400 rounded-lg p-1 text-ellipsis text-center '>สุขสันต์เดือนเกิดและครบรอบเดบิวต์ไอช่า!</p>";
    }

    document.getElementById("result").innerHTML = message;
    document.getElementById("age").innerHTML = age;
    document.getElementById("debutAnnment").innerHTML = debutAnnment;
    document.getElementById("annd").innerHTML = debutCount;
    setColor();
  }

  function setColor() {
    const today = new Date();
    const todayMonth = today.getMonth() + 1;
    const todayDay = today.getDate();
    const birthMonth = parseInt(predefinedBirthdate.split("/")[1]);
    const birthDay = parseInt(predefinedBirthdate.split("/")[2]);

    const resultElement = document.getElementById("result");

    if (
      (todayMonth === birthMonth && todayDay === birthDay) ||
      todayMonth === birthMonth
    ) {
      resultElement.classList.add("");
    } else if (todayDay === birthDay) {
      resultElement.classList.add("");
    }
  }

  function adjustAge(
    todayYear,
    todayMonth,
    todayDay,
    birthYear,
    birthMonth,
    birthDay
  ) {
    let adjustedYears = todayYear - birthYear - 1;
    let adjustedMonths = 12 - birthMonth + todayMonth;
    let adjustedDays = 0;

    if (todayDay >= birthDay) {
      adjustedDays = todayDay - birthDay;
    } else {
      adjustedMonths--;
      const daysInLastMonth = daysInMonth(todayMonth - 1, todayYear);
      adjustedDays = daysInLastMonth - birthDay + todayDay;
    }

    if (adjustedMonths >= 12) {
      adjustedYears++;
      adjustedMonths -= 12;
    }

    return {
      years: adjustedYears,
      months: adjustedMonths,
      days: adjustedDays,
    };
  }

  function daysInMonth(month, year) {
    return new Date(year, month, 0).getDate();
  }
</script>